name: "Reader - Scheme - S3"
before: |
  <p>
    Arkime 5.0 added the ability to process S3 files directly without having to first download the files.
    Arkime 5.3 enhanced the capability to process multiple S3 files using a prefix.
  </p>
  <div>
    Two forms of the S3 URL are supported:
    <ul>
      <li><code>s3://bucket/key</code></li>
      <li><code>s3http(s)://host(:port)/bucket/key</code></li>
    </ul>
  </div>
  <div>
    <dl>
      <dt>Process a single file</dt>
      <dd><code>capture -r s3://testbucket/filepath/file.pcap</code></dd>
      <dt>Process files with a matching prefix</dt>
      <dd><code>capture -R s3https://host:443/testbucket/filepath/abc</code></dd>
    </dl>
  </div>

settings:
  - key: s3Region
    value: us-east-1
    text: |
      S3 Region the bucket is in

  - key: s3AccessKeyId
    value: EMPTY
    text: |
      The S3 Access Key ID to use to access the bucket

  - key: s3SecretAccessKey
    value: EMPTY
    text: |
      The S3 Secret Access Key to use to access the bucket

  - key: s3Host
    value: EMPTY
    text: |
      In <code>s3://</code> mode the host to use for the S3 bucket, otherwise the amazonaws.com host will be used.

  - key: s3GapPacketPos
    value: "true"
    text: |
      Encode packetPos using a simple gap encoding, this reduces storage in OpenSearch/Elasticsearch

  - key: s3PathAccessStyle
    value: "false"
    text: |
      In <code>s3://</code> mode if true use <code>s3.amazonaws.com/s3Bucket</code> if false use <code>s3Bucket.s3.amazonaws.com</code>.
